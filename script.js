collection=[{"name":"20240508_0069.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240508_0083.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240509_0041.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240509_0076.jpg","tags":["archive","nyc","website"],"heightRatio":1.45443},{"name":"20240510_0045.jpg","tags":["archive","nyc","website"],"heightRatio":0.79995},{"name":"20240511_0009.jpg","tags":["archive","nyc","website"],"heightRatio":0.748071},{"name":"20240511_0019.jpg","tags":["anna","archive","nyc","website"],"heightRatio":1.33616},{"name":"20240513_0038.jpg","tags":["archive","nyc","website"],"heightRatio":1.31729},{"name":"20240513_0047.jpg","tags":["archive","nyc","website"],"heightRatio":1.33642},{"name":"20240514_0040.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240516_0009.jpg","tags":["archive","nyc","website"],"heightRatio":1.35939},{"name":"20240516_0017.jpg","tags":["archive","nyc","website"],"heightRatio":1.37584},{"name":"20240516_0030.jpg","tags":["archive","nyc","website"],"heightRatio":0.743205},{"name":"20240516_0036.jpg","tags":["archive","nyc","subwayentrance","website"],"heightRatio":0.748051},{"name":"20240516_0039.jpg","tags":["archive","nyc","subwayentrance","website"],"heightRatio":0.748276},{"name":"20240516_0061.jpg","tags":["archive","nyc","website"],"heightRatio":1.36512},{"name":"20240516_0068.jpg","tags":["archive","nyc","website"],"heightRatio":0.743422},{"name":"20240516_0075.jpg","tags":["archive","nyc","website"],"heightRatio":0.676015},{"name":"20240520_0013.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240520_0017.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240520_0089.jpg","tags":["archive","longbranch","nj","website"],"heightRatio":1.35612},{"name":"20240520_0096.jpg","tags":["archive","longbranch","nj","website"],"heightRatio":0.74807},{"name":"20240520_0098.jpg","tags":["archive","longbranch","nj","website"],"heightRatio":1},{"name":"20240521_0022.jpg","tags":["archive","nyc","website"],"heightRatio":1.33647},{"name":"20240522_0010.jpg","tags":["archive","nyc","website"],"heightRatio":1.33667},{"name":"20240522_0018.jpg","tags":["archive","nyc","website"],"heightRatio":1.33653},{"name":"20240522_0029.jpg","tags":["archive","nyc","website"],"heightRatio":1.3365},{"name":"20240522_0037.jpg","tags":["archive","mirrorselfie","nyc","website"],"heightRatio":1.34966},{"name":"20240522_0038.jpg","tags":["archive","critters","nyc","website"],"heightRatio":1.33641},{"name":"20240522_0040.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240522_0041.jpg","tags":["archive","nyc","website"],"heightRatio":0.752039},{"name":"20240522_0047.jpg","tags":["archive","nyc","website"],"heightRatio":0.748233},{"name":"20240524_0004.jpg","tags":["archive","nyc","website"],"heightRatio":1.35094},{"name":"20240524_0017.jpg","tags":["archive","nyc","website"],"heightRatio":1.39297},{"name":"20240524_0018.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240524_0020.jpg","tags":["archive","nyc","website"],"heightRatio":1.35496},{"name":"20240524_0049.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240524_0055.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240524_0062.jpg","tags":["archive","nyc","website"],"heightRatio":1.34843},{"name":"20240525_0061.jpg","tags":["archive","critters","nyc","website"],"heightRatio":0.748276},{"name":"20240527_0005.jpg","tags":["archive","nyc","website"],"heightRatio":1.35847},{"name":"20240527_0061.jpg","tags":["archive","nyc","website"],"heightRatio":1.33678},{"name":"20240527_0070.jpg","tags":["archive","nyc","website"],"heightRatio":1.35727},{"name":"20240527_0096.jpg","tags":["archive","nyc","subwayentrance","website"],"heightRatio":1.37256},{"name":"20240529_0034.jpg","tags":["archive","nyc","website"],"heightRatio":0.734478},{"name":"20240529_0080.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240531_0104.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240531_0126.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240601_0011.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_0106.jpg","tags":["archive","nyc","website"],"heightRatio":1.34305},{"name":"20240606_0126.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_0245.jpg","tags":["archive","critters","nyc","website"],"heightRatio":1.33641},{"name":"20240606_0282.jpg","tags":["archive","critters","nyc","website"],"heightRatio":0.748276},{"name":"20240606_0318.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_0538.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_0547.jpg","tags":["archive","nyc","website"],"heightRatio":0.71422},{"name":"20240606_0580.jpg","tags":["archive","nyc","website"],"heightRatio":0.745777},{"name":"20240606_0633.jpg","tags":["archive","nyc","website"],"heightRatio":1.25024},{"name":"20240606_0721.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240606_0787.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_0834.jpg","tags":["archive","nyc","website"],"heightRatio":1.34315},{"name":"20240606_0961.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240606_0983.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_1130.jpg","tags":["archive","nyc","website"],"heightRatio":1.36344},{"name":"20240606_1146.jpg","tags":["archive","nyc","website"],"heightRatio":1.35022},{"name":"20240606_1210.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_1252.jpg","tags":["archive","nyc","website"],"heightRatio":1.47194},{"name":"20240606_1279.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_1309.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240606_1363.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240617_0113.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":0.540462},{"name":"20240617_0180.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.33641},{"name":"20240617_0200.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.51913},{"name":"20240617_0212.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":0.745502},{"name":"20240617_0226.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.34943},{"name":"20240617_0355.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":0.5},{"name":"20240617_0359.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.38723},{"name":"20240617_0407.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.34315},{"name":"20240617_0415.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.33641},{"name":"20240617_0417.jpg","tags":["archive","sanfrancisco","website"],"heightRatio":1.33641},{"name":"20240617_0488.jpg","tags":["archive","website"],"heightRatio":0.540308},{"name":"20240618_0001_3.jpg","tags":["archive","nyc","website"],"heightRatio":1.33653},{"name":"20240618_0004_2.jpg","tags":["archive","nyc","website"],"heightRatio":0.748133},{"name":"20240618_0007_3.jpg","tags":["archive","nyc","website"],"heightRatio":1.3365},{"name":"20240618_0035_2.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240618_0040_2.jpg","tags":["archive","nyc","website"],"heightRatio":0.790531},{"name":"20240622_0074.jpg","tags":["archive","website"],"heightRatio":0.856966},{"name":"20240622_0137.jpg","tags":["archive","website"],"heightRatio":1.33641},{"name":"20240623_0060.jpg","tags":["archive","website"],"heightRatio":1.33641},{"name":"20240623_0133.jpg","tags":["archive","website"],"heightRatio":1.33667},{"name":"20240623_0138.jpg","tags":["archive","website"],"heightRatio":1.33641},{"name":"20240623_0230.jpg","tags":["archive","website"],"heightRatio":1.33641},{"name":"20240630_0058.jpg","tags":["archive","website"],"heightRatio":1.33677},{"name":"20240630_0059.jpg","tags":["archive","nyc","website"],"heightRatio":1.25008},{"name":"20240630_0102.jpg","tags":["archive","neon","website"],"heightRatio":0.748072},{"name":"20240630_0179.jpg","tags":["archive","website"],"heightRatio":1.3365},{"name":"20240630_0384_pano.jpg","tags":["panoramic","website"],"heightRatio":0.352839},{"name":"20240630_0476.jpg","tags":["archive","nyc","website"],"heightRatio":1.33646},{"name":"20240630_0515.jpg","tags":["archive","website"],"heightRatio":0.748276},{"name":"20240630_0543.jpg","tags":["archive","website"],"heightRatio":1.33642},{"name":"20240630_0564.jpg","tags":["archive","website"],"heightRatio":0.800609},{"name":"20240707_0003.jpg","tags":["anna","archive","nyc","website"],"heightRatio":0.748276},{"name":"20240707_0011.jpg","tags":["archive","nyc","website"],"heightRatio":0.727253},{"name":"20240707_0027.jpg","tags":["archive","critters","nyc","website"],"heightRatio":0.666667},{"name":"20240707_0038.jpg","tags":["archive","critters","nyc","website"],"heightRatio":0.666667},{"name":"20240707_0048.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240707_0177.jpg","tags":["archive","longbranch","nj","website"],"heightRatio":0.748276},{"name":"20240715_0027.jpg","tags":["archive","nyc","website"],"heightRatio":1.33659},{"name":"20240715_0089.jpg","tags":["archive","nyc","website"],"heightRatio":0.499891},{"name":"20240719_0037.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240719_0043.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240719_0075.jpg","tags":["archive","nyc","website"],"heightRatio":1.16691},{"name":"20240719_0078.jpg","tags":["archive","nyc","website"],"heightRatio":0.857069},{"name":"20240719_0097.jpg","tags":["archive","nyc","website"],"heightRatio":0.5},{"name":"20240719_0137.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240728_0014.jpg","tags":["anna","archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0036.jpg","tags":["anna","archive","pnw","website"],"heightRatio":0.732478},{"name":"20240728_0074.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0081.jpg","tags":["archive","critters","pnw","website"],"heightRatio":0.748276},{"name":"20240728_0089.jpg","tags":["archive","pnw","website"],"heightRatio":0.748084},{"name":"20240728_0111.jpg","tags":["anna","archive","pnw","website"],"heightRatio":1.16688},{"name":"20240728_0114.jpg","tags":["anna","archive","pnw","website"],"heightRatio":1.16667},{"name":"20240728_0255.jpg","tags":["anna","archive","pnw","website"],"heightRatio":0.748276},{"name":"20240728_0293.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0334.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0398.jpg","tags":["archive","pnw","website"],"heightRatio":0.748276},{"name":"20240728_0470.jpg","tags":["archive","critters","pnw","website"],"heightRatio":0.748276},{"name":"20240728_0508.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0540.jpg","tags":["archive","critters","pnw","website"],"heightRatio":0.748276},{"name":"20240728_0617.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0621.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0622.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0669.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0691.jpg","tags":["archive","critters","pnw","website"],"heightRatio":1.3368},{"name":"20240728_0704.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0727.jpg","tags":["archive","pnw","website"],"heightRatio":1.33655},{"name":"20240728_0734.jpg","tags":["anna","archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0741.jpg","tags":["archive","pnw","website"],"heightRatio":1.33641},{"name":"20240728_0755.jpg","tags":["archive","pnw","website"],"heightRatio":0.748276},{"name":"20240728_0830.jpg","tags":["archive","pnw","website"],"heightRatio":0.748109},{"name":"20240728_0899.jpg","tags":["archive","pnw","website"],"heightRatio":0.74062},{"name":"20240728_0980.jpg","tags":["archive","pnw","website"],"heightRatio":1.16672},{"name":"20240804_0015.jpg","tags":["archive","nyc","website"],"heightRatio":0.748131},{"name":"20240804_0089.jpg","tags":["archive","nyc","website"],"heightRatio":1.45574},{"name":"20240804_0154.jpg","tags":["archive","nyc","website"],"heightRatio":1},{"name":"20240809_0045_pano.jpg","tags":["panoramic","website"],"heightRatio":0.352919},{"name":"20240809_0062.jpg","tags":["archive","website"],"heightRatio":0.744565},{"name":"20240809_0096.jpg","tags":["archive","nyc","website"],"heightRatio":1},{"name":"20240809_0098.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240809_0126.jpg","tags":["archive","nyc","website"],"heightRatio":0.748135},{"name":"20240809_0127.jpg","tags":["archive","nyc","website"],"heightRatio":0.748238},{"name":"20240813_0001.jpg","tags":["archive","boston","website"],"heightRatio":1},{"name":"20240813_0004.jpg","tags":["archive","boston","website"],"heightRatio":0.992429},{"name":"20240813_0012.jpg","tags":["archive","boston","website"],"heightRatio":1},{"name":"20240813_0021.jpg","tags":["archive","boston","website"],"heightRatio":1},{"name":"20240813_0045.jpg","tags":["archive","nyc","website"],"heightRatio":1},{"name":"20240813_0064_pano.jpg","tags":["nyc","panoramic","website"],"heightRatio":0.352927},{"name":"20240813_0090.jpg","tags":["archive","nyc","website"],"heightRatio":0.748259},{"name":"20240829_0101.jpg","tags":["archive","nyc","website"],"heightRatio":1.33654},{"name":"20240829_0115.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240829_0129.jpg","tags":["archive","nyc","website"],"heightRatio":1},{"name":"20240829_0143.jpg","tags":["archive","nyc","website"],"heightRatio":1.33673},{"name":"20240829_0148.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240829_0149.jpg","tags":["archive","nyc","website"],"heightRatio":1.33641},{"name":"20240829_0150.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240829_0167.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240829_0169.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240829_0182.jpg","tags":["archive","nyc","website"],"heightRatio":1.33658},{"name":"20240829_0184.jpg","tags":["archive","nyc","website"],"heightRatio":0.748143},{"name":"20240829_0198.jpg","tags":["archive","nyc","website"],"heightRatio":0.748252},{"name":"20240829_0208.jpg","tags":["archive","nyc","website"],"heightRatio":1},{"name":"20240829_0235.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240829_0240.jpg","tags":["archive","nyc","website"],"heightRatio":0.748276},{"name":"20240912_0031.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0039.jpg","tags":["anna","ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0041.jpg","tags":["anna","ecuador","website"],"heightRatio":1.3366},{"name":"20240912_0046.jpg","tags":["ecuador","website"],"heightRatio":0.74818},{"name":"20240912_0091.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0099.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0140.jpg","tags":["critters","ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0143.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748258},{"name":"20240912_0151.jpg","tags":["critters","ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0158.jpg","tags":["archive","critters","ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0164.jpg","tags":["ecuador","website"],"heightRatio":1.33675},{"name":"20240912_0230.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748021},{"name":"20240912_0274.jpg","tags":["anna","ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0299.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0337.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0351.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0384.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748252},{"name":"20240912_0387.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748273},{"name":"20240912_0455.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0462.jpg","tags":["ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0475.jpg","tags":["ecuador","website"],"heightRatio":1.33671},{"name":"20240912_0486.jpg","tags":["ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0493.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0501.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_0504.jpg","tags":["ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0506.jpg","tags":["ecuador","website"],"heightRatio":1.33641},{"name":"20240912_0508.jpg","tags":["ecuador","website"],"heightRatio":1.33656},{"name":"20240912_0553.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748259},{"name":"20240912_0644.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748191},{"name":"20240912_0670.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748188},{"name":"20240912_0931.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748261},{"name":"20240912_1050.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_1065.jpg","tags":["ecuador","website"],"heightRatio":1.33641},{"name":"20240912_1083.jpg","tags":["ecuador","website"],"heightRatio":0.74811},{"name":"20240912_1196.jpg","tags":["ecuador","website"],"heightRatio":1.33657},{"name":"20240912_1393.jpg","tags":["anna","ecuador","website"],"heightRatio":1.33641},{"name":"20240912_1537.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748238},{"name":"20240912_1820.jpg","tags":["critters","ecuador","website"],"heightRatio":1.33641},{"name":"20240912_1844.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748171},{"name":"20240912_2251.jpg","tags":["ecuador","website"],"heightRatio":0.748455},{"name":"20240912_2278.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_2281.jpg","tags":["anna","ecuador","website"],"heightRatio":0.7481},{"name":"20240912_2299.jpg","tags":["ecuador","website"],"heightRatio":0.748276},{"name":"20240912_2664.jpg","tags":["ecuador","website"],"heightRatio":0.74821},{"name":"20240912_2710.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748224},{"name":"20240912_2955.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748276},{"name":"20240912_3202.jpg","tags":["ecuador","website"],"heightRatio":1.33692},{"name":"20240912_3355.jpg","tags":["ecuador","website"],"heightRatio":1.33641},{"name":"20240912_3443.jpg","tags":["critters","ecuador","website"],"heightRatio":0.748248},{"name":"20240912_3572.jpg","tags":["ecuador","website"],"heightRatio":0.748241},{"name":"20240929_0059.jpg","tags":["archive","critters","nyc","website"],"heightRatio":0.748252},{"name":"20240929_0148.jpg","tags":["archive","critters","nyc","website"],"heightRatio":0.748218},{"name":"20240929_0246.jpg","tags":["albany","archive","website"],"heightRatio":0.748276},{"name":"20240929_0251.jpg","tags":["albany","archive","website"],"heightRatio":1},{"name":"20241022_0066.jpg","tags":["archive","nyc","website"],"heightRatio":0.748346},{"name":"20241022_0095.jpg","tags":["archive","nyc","website"],"heightRatio":0.748118},{"name":"20241022_0129.jpg","tags":["archive","nyc","website"],"heightRatio":0.748343},{"name":"20241022_0132.jpg","tags":["archive","critters","utah","website","zion"],"heightRatio":1.33641},{"name":"20241022_0175.jpg","tags":["archive","utah","website","zion"],"heightRatio":1.33641},{"name":"20241022_0228.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748276},{"name":"20241022_0249.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748276},{"name":"20241022_0263.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748179},{"name":"20241022_0630.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748276},{"name":"20241022_0668.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748355},{"name":"20241022_0812.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748276},{"name":"20241022_0853.jpg","tags":["archive","utah","website","zion"],"heightRatio":1.33641},{"name":"20241022_0884.jpg","tags":["archive","utah","website"],"heightRatio":0.748276},{"name":"20241022_0901.jpg","tags":["archive","sanddunes","utah","website"],"heightRatio":0.748224},{"name":"20241022_0973.jpg","tags":["archive","sanddunes","utah","website"],"heightRatio":0.748276},{"name":"20241022_1097.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748205},{"name":"20241022_1346.jpg","tags":["archive","critters","utah","website"],"heightRatio":1.33641},{"name":"20241022_1388.jpg","tags":["archive","critters","utah","website"],"heightRatio":0.748276},{"name":"20241022_1514.jpg","tags":["archive","bryce","utah","website"],"heightRatio":1.33641},{"name":"20241022_1561.jpg","tags":["archive","bryce","critters","utah","website"],"heightRatio":0.748025},{"name":"20241022_1870.jpg","tags":["archive","bryce","critters","utah","website"],"heightRatio":0.748276},{"name":"20241022_1881.jpg","tags":["archive","bryce","critters","utah","website"],"heightRatio":0.748276},{"name":"20241022_2032.jpg","tags":["archive","bryce","critters","utah","website"],"heightRatio":1.33642},{"name":"20241022_2068.jpg","tags":["archive","bryce","utah","website"],"heightRatio":0.748276},{"name":"20241022_2533.jpg","tags":["archive","critters","utah","website","zion"],"heightRatio":0.748276},{"name":"20241022_2717.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748122},{"name":"20241022_2748.jpg","tags":["archive","critters","utah","website","zion"],"heightRatio":0.748114},{"name":"20241022_2750.jpg","tags":["archive","critters","utah","website","zion"],"heightRatio":0.748244},{"name":"20241022_2790.jpg","tags":["archive","utah","website","zion"],"heightRatio":1.33641},{"name":"20241022_2838.jpg","tags":["archive","critters","utah","website","zion"],"heightRatio":0.74811},{"name":"20241022_3039.jpg","tags":["archive","utah","website","zion"],"heightRatio":0.748276},{"name":"P5070104.jpg","tags":["archive","nyc","website"],"heightRatio":1.34236},{"name":"verrazzano.jpg","tags":["nyc","panoramic","website"],"heightRatio":0.352878},]

const params = new URLSearchParams(window.location.search);
let queryTagList = params.getAll("tag");
let archiveMonth = params.get("archive");
let shouldShowPanos = queryTagList.includes("panoramic");

const photosDiv = document.getElementById("photos");
const col1 = document.getElementById("col1");
const col2 = document.getElementById("col2");
const cols = [col1, col2]
let colHeights = [0, 0]
let nextCol = 0

// fullover-component is expected to be included in DOM already
function displayFullover(imageComponent) {
    fulloverComponent = document.getElementById("fullover-component")
    fulloverComponent.setAttribute("src", imageComponent.getAttribute("src"))
    fulloverComponent.show()
}

function displayImage(img) {
    photo = document.createElement("photo-component")
    photo.setAttribute("src", "./img/"+img.name)
    cols[nextCol].appendChild(photo)
    colHeights[nextCol] += img.heightRatio
    if (cols.length == 2 && colHeights[nextCol] > colHeights[(nextCol + 1) % 2]) {
        nextCol = (nextCol + 1) % 2
    }
}

function pageHeight() {
    var body = document.body;
    var html = document.documentElement;
    return Math.max( body.scrollHeight, body.offsetHeight,
        html.clientHeight, html.scrollHeight, html.offsetHeight );
}

function hasTag(img, tag) {
    for (tagIdx = 0; tagIdx < img.tags.length; tagIdx++) {
        if (img.tags[tagIdx] == tag) {
            return true
        }
    }
    return false
}

function hasAnyTag(img, tagList) {
    for (queryTagIdx = 0; queryTagIdx < tagList.length; queryTagIdx++) {
        for (tagIdx = 0; tagIdx < img.tags.length; tagIdx++) {
            if (img.tags[tagIdx] == tagList[queryTagIdx]) {
                return true
            }
        }
    }
    return false
}

function hasAllTags(img, tagList) {
each_query_tag:
    for (queryTagIdx = 0; queryTagIdx < tagList.length; queryTagIdx++) {
        if (img.tags.includes(tagList[queryTagIdx])) {
            continue each_query_tag
        }
        return false
    }
    return true
}



// filters return true if the image should be filtered out
filters = [archiveMonthFilter, tagFilter, panoFilter]

function archiveMonthFilter(img) {
    if (archiveMonth == null) {
        return false
    }
    return (!img.name.startsWith(archiveMonth) || !hasTag(img, "archive"))
}

function tagFilter(img) {
    if (queryTagList.length == 0) {
        return false
    }
    if (queryTagList.length == 1) {
        return !hasTag(img, queryTagList[0])
    }
    return !hasAllTags(img, queryTagList)
}

function panoFilter(img) {
    isPano = hasTag(img, "panoramic")
    return shouldShowPanos !== isPano
}

displayCollection = []
function advanceDisplayCollection() {
    if (displayCollection.length == 0) {
        return
    }
    newImg = displayCollection.shift()
    displayImage(newImg)
}


window.onscroll = function() {
    if (window.scrollY+window.innerHeight < pageHeight() - (2*window.innerHeight)) {
        // don't load yet, plenty of other images are already loaded
        return
    }
    advanceDisplayCollection()
};

function main() {
    if (shouldShowPanos) {
        // make col1 full width
        col1.setAttribute("class", "full-width")
        // remove col2
        col2Idx = cols.indexOf(col2)
        cols.splice(col2Idx, 1)
        col2.remove()
    }


eachimg:
    for (i = 0; i < collection.length; i++) {
        for (filterIdx = 0; filterIdx < filters.length; filterIdx++) {
            if (filters[filterIdx](collection[i])) {
                continue eachimg
            }
        }
        displayCollection.push(collection[i])
    }

    if (displayCollection.length == 0) {
        return
    }
    imgCount = 0
    while (imgCount < 10) {
        advanceDisplayCollection()
        imgCount++
    }
}

main()
